var o=class r{#e;#t;#r;constructor(e,t=null){this.#e=e,this.#t=[],this.#r=t}get value(){return this.#r!=null?this.#r(this.#e):this.#e}set value(e){let t=this.value;this.#e=e,this.#t.forEach(i=>i(this.value,t))}subscribe(e){this.#t.push(e),e(this.value,this.value)}update(e){let t=this.value;e(this),this.#t.forEach(i=>i(this.value,t))}as(e){let t=new r(this.value,e);return this.subscribe(i=>t.value=i),t}};function E(r){return r[Math.floor(Math.random()*r.length)]}function T(r,e){return Math.floor(Math.random()*(e-r+1))+r}function b(r){return Array(r).fill(0).map(()=>E([..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"])).join("")}var y=r=>d(r)?r:new o(r),s=(r,e)=>d(r)?r.subscribe(e):e(r,r),d=r=>r instanceof o;function M(r){return c().from_dom(document.querySelector(r))}function B(r){return Array.from(document.querySelectorAll(r)).map(e=>new a().from_dom(e))}function L(r){document.head.appendChild(document.createElement("style")).innerHTML=r}function c(r){return new a(r)}var a=class{constructor(e="div"){this._domEl=document.createElement(e)}text(e){return s(e,t=>{this._domEl.textContent=t}),this}insert(e){if(d(e)){let t=e.value.to_dom();this._domEl.appendChild(t),e.subscribe(i=>{t.replaceWith(i.to_dom())})}else this._domEl.appendChild(e.to_dom());return this}handle(e,t){let i;return s(t,n=>{i&&this._domEl.removeEventListener(e,i),i=l=>{n(e,this.get(),l)},this._domEl.addEventListener(e,i)}),this}style(e,t){return s(t,i=>{this._domEl.style[e]=i}),this}set_cssvar(e,t){return s(t,i=>{this._domEl.style.setProperty(`--${e}`,i)}),this}get_cssvar(e){return this._domEl.style.getPropertyValue(`--${e}`)}set_prop(e,t){return s(t,i=>{this._domEl[e]=i}),this}get_prop(e){return this._domEl[e]}bind_prop(e,t,i){return s(t,n=>{this.set_prop(e,n)}),this._domEl.addEventListener(i,()=>{t.value=this._domEl[e]}),this}sub(e,t){return e.subscribe((i,n)=>{t(i,n,this.get())}),this}id(e){return this._domEl.setAttribute("id",e),this}add_class(e){let t;return s(e,i=>{t&&this.remove_class(t),this._domEl.classList.add(i),t=i}),this}remove_class(e){return this._domEl.classList.remove(e),this}replace_class(e,t){return this._domEl.classList.replace(e,t),this}toggle_class(e){return this._domEl.classList.toggle(e),this}if_class(e,t,i){return this._domEl.classList.contains(e)?t():i(),this}clear(){return this._domEl.innerHTML="",this}loop(e,t,i,n){let l=c().style("display","contents");return s(e,h=>{if(l.clear(),h.length==0)l.insert(i());else if(n){let u=n();h.forEach((m,v)=>{u.insert(t(m,v))}),l.insert(u)}else h.forEach((u,m)=>{l.insert(t(u,m))})}),this.insert(l),this}has_class(e){return this._domEl.classList.contains(e)}classes(){return Array.from(this._domEl.classList)}get(){return this}from_dom(e){return this._domEl=e,this}to_dom(){return this._domEl}if(e,t){return e&&t(this.get()),this}process(e){return e(this),this}};export{M as $,B as $all,L as $css,a as ElementBuilder,o as Reactive,y as Variable,c as _,T as get_random_between,E as get_random_item,b as get_random_string,d as is_reactive,s as subscribe};
